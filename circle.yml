checkout:
  post:
    # Fetch the complete repository. Required to get the tags and
    # properly install the package with the correct version number.
    - git fetch --unshallow || true
    - git fetch --tags

dependencies:
  override:
    - pip install tox coverage
    - pyenv local 2.7.10 2.6.8

test:
  pre:
    - coverage erase
  override:
    - tox -v -- --with-xunit
  post:
    - find . -maxdepth 1 -name "nosetests-*.xml" -exec mv {} $CIRCLE_TEST_REPORTS/ \;
    - coverage html
    - mv htmlcov $CIRCLE_TEST_REPORTS/coverage
